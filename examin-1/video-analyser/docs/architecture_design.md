# Video-Analyser アーキテクチャ設計書

## 1. 概要

Video-Analyser は、動画コンテンツを分析し、インテリジェントなプランを提案するWeb アプリケーションです。
Next.js、React、TypeScriptを使用して構築され、Tailwind CSSとRadix UIコンポーネントでスタイリングされています。
ユーザーは動画をアップロードし、AIを活用した分析結果を確認することができます。

## 2. システム構成

### 2.1 技術スタック
- **フロントエンド**: Next.js (React), TypeScript
- **スタイリング**: Tailwind CSS, Radix UI
- **アニメーション**: Framer Motion
- **フォーム処理**: React Hook Form, Zod

### 2.2 開発環境
- **ビルド/実行**: npm/yarn
- **デプロイ**: Vercel (推奨)
- **ローカル開発**: Next.js dev server

## 3. アプリケーション構造

### 3.1 ディレクトリ構成
```
video-analyser/
├── app/                # Next.js アプリディレクトリ
│   ├── globals.css     # グローバルスタイル
│   ├── layout.tsx      # ルートレイアウト
│   └── page.tsx        # メインエントリーポイント
├── components/         # Reactコンポーネント
│   ├── AnalysisPage.tsx       # 分析ページ
│   ├── AnalysisResults.tsx    # 分析結果表示
│   ├── AnalysisSettings.tsx   # 分析設定
│   ├── HistoryPage.tsx        # 履歴ページ
│   ├── HomePage.tsx           # ホームページ
│   ├── SettingsPage.tsx       # 設定ページ
│   ├── Sidebar.tsx            # サイドバー
│   ├── VideoAnalyser.tsx      # メインアプリコンテナ
│   ├── types.ts               # 型定義
│   └── ui/                    # 共通UIコンポーネント
├── hooks/              # カスタムReactフック
├── lib/               # ユーティリティ関数
├── public/            # 静的ファイル
└── styles/            # スタイル関連
```

## 4. コンポーネント設計

### 4.1 メインコンポーネント構成
- **VideoAnalyser**: アプリケーションのルートコンテナ
  - **Sidebar**: ナビゲーションと操作用サイドバー
  - **HomePage**: アプリケーション概要と使い方
  - **AnalysisPage**: 動画分析の中心機能
    - **AnalysisSettings**: 分析オプション設定
    - **AnalysisResults**: 分析結果表示
  - **HistoryPage**: 過去の分析履歴
  - **SettingsPage**: アプリケーション設定

### 4.2 データモデル
- **AnalysisTag**: 分析タグ情報（名前、信頼度）
- **AnalysisRow**: 分析結果の行データ（チャプター、時間、内容、タグ）
- **AnalysisHistory**: 分析履歴データ（ID、タイトル、日付、概要）

## 5. 機能フロー

### 5.1 動画分析プロセス
1. ユーザーが動画をアップロード（ドラッグ&ドロップまたはファイル選択）
2. 分析設定の構成（プラン数、参照ファイル、信頼度閾値、システムプロンプト）
3. 分析実行とプログレスバー表示
4. 複数の分析候補結果の生成と表示
5. 結果の編集、確認、保存

### 5.2 主要機能
- 動画ファイルのアップロードと処理
- 複数の分析プランの生成と比較
- 参照ファイルによる分析精度向上
- カスタムシステムプロンプトによるAI挙動制御
- 分析結果の編集と調整
- 分析履歴の保存と管理

## 6. ユーザーインターフェース

### 6.1 デザインシステム
- **カラーパレット**：
  - メインカラー: #bb0a06 (赤)
  - サブカラー: #d9d9d9 (ライトグレー)
- **UIコンポーネント**: Radix UIベースのカスタムコンポーネント
- **レスポンシブデザイン**: モバイルとデスクトップに対応

### 6.2 画面構成
- サイドバーと内容領域の2カラムレイアウト
- カード型コンポーネントによる情報分類
- アニメーションによるスムーズな画面遷移(Framer Motion)

## 7. ローカル開発環境構築

### 7.1 必要条件
- Node.js 16.8.0以上
- npm または yarn

### 7.2 インストール手順
```bash
# リポジトリのクローン
git clone <リポジトリURL>
cd video-analyser

# 依存関係のインストール
npm install
# または
yarn install

# 開発サーバーの起動
npm run dev
# または
yarn dev
```

### 7.3 ビルドプロセス
```bash
# プロダクションビルド
npm run build
# または
yarn build

# ビルド結果の実行
npm run start
# または
yarn start
```

## 8. 今後の展望と課題

### 8.1 機能拡張予定
- リアルAI分析エンジンとの統合
- 複数動画の一括分析機能
- 分析結果のエクスポート機能
- ユーザー認証システム

### 8.2 技術的課題
- 大容量動画ファイルの効率的な処理
- AIモデルのパフォーマンス最適化
- 分析精度向上のための学習機能
- バックエンドシステムとの統合

## 9. 補足資料

現在のバージョンはフロントエンドのモックアップとして実装されており、実際の分析機能はまだ実装されていません。今後の開発で実際のAI分析エンジンとの統合が予定されています。